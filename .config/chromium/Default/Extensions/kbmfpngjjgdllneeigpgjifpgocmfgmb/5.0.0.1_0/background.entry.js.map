{"version":3,"file":"background.entry.js","sources":["webpack:///webpack/bootstrap b9b256dd9cedc7140a8d","webpack:///chrome/background.entry.js","webpack:///node_modules/babel-runtime/core-js/object/keys.js","webpack:///node_modules/core-js/library/fn/object/keys.js","webpack:///node_modules/core-js/library/modules/es6.object.keys.js","webpack:///node_modules/core-js/library/modules/_to-object.js","webpack:///node_modules/core-js/library/modules/_defined.js","webpack:///node_modules/core-js/library/modules/_object-keys.js","webpack:///node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///","webpack:///node_modules/core-js/library/modules/_has.js","webpack:///node_modules/core-js/library/modules/_to-iobject.js","webpack:///node_modules/core-js/library/modules/_iobject.js","webpack:///node_modules/core-js/library/modules/_cof.js","webpack:///node_modules/core-js/library/modules/_array-includes.js","webpack:///node_modules/core-js/library/modules/_to-length.js","webpack:///node_modules/core-js/library/modules/_to-integer.js","webpack:///node_modules/core-js/library/modules/_to-index.js","webpack:///node_modules/core-js/library/modules/_shared-key.js","webpack:///node_modules/core-js/library/modules/_shared.js","webpack:///node_modules/core-js/library/modules/_global.js","webpack:///node_modules/core-js/library/modules/_uid.js","webpack:///node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///node_modules/core-js/library/modules/_object-sap.js","webpack:///node_modules/core-js/library/modules/_export.js","webpack:///node_modules/core-js/library/modules/_core.js","webpack:///node_modules/core-js/library/modules/_ctx.js","webpack:///node_modules/core-js/library/modules/_a-function.js","webpack:///node_modules/core-js/library/modules/_hide.js","webpack:///node_modules/core-js/library/modules/_object-dp.js","webpack:///node_modules/core-js/library/modules/_an-object.js","webpack:///node_modules/core-js/library/modules/_is-object.js","webpack:///node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///node_modules/core-js/library/modules/_descriptors.js","webpack:///node_modules/core-js/library/modules/_fails.js","webpack:///node_modules/core-js/library/modules/_dom-create.js","webpack:///node_modules/core-js/library/modules/_to-primitive.js","webpack:///node_modules/core-js/library/modules/_property-desc.js","webpack:///node_modules/babel-runtime/core-js/promise.js","webpack:///node_modules/core-js/library/fn/promise.js","webpack:///node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///node_modules/core-js/library/modules/_string-at.js","webpack:///node_modules/core-js/library/modules/_iter-define.js","webpack:///node_modules/core-js/library/modules/_library.js","webpack:///node_modules/core-js/library/modules/_redefine.js","webpack:///node_modules/core-js/library/modules/_iterators.js","webpack:///node_modules/core-js/library/modules/_iter-create.js","webpack:///node_modules/core-js/library/modules/_object-create.js","webpack:///node_modules/core-js/library/modules/_object-dps.js","webpack:///node_modules/core-js/library/modules/_html.js","webpack:///node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///node_modules/core-js/library/modules/_wks.js","webpack:///node_modules/core-js/library/modules/_object-gpo.js","webpack:///node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///node_modules/core-js/library/modules/_iter-step.js","webpack:///node_modules/core-js/library/modules/es6.promise.js","webpack:///node_modules/core-js/library/modules/_classof.js","webpack:///node_modules/core-js/library/modules/_an-instance.js","webpack:///node_modules/core-js/library/modules/_for-of.js","webpack:///node_modules/core-js/library/modules/_iter-call.js","webpack:///node_modules/core-js/library/modules/_is-array-iter.js","webpack:///node_modules/core-js/library/modules/core.get-iterator-method.js","webpack:///node_modules/core-js/library/modules/_species-constructor.js","webpack:///node_modules/core-js/library/modules/_task.js","webpack:///node_modules/core-js/library/modules/_invoke.js","webpack:///node_modules/core-js/library/modules/_microtask.js","webpack:///node_modules/core-js/library/modules/_redefine-all.js","webpack:///node_modules/core-js/library/modules/_set-species.js","webpack:///node_modules/core-js/library/modules/_iter-detect.js","webpack:///node_modules/babel-runtime/helpers/asyncToGenerator.js","webpack:///node_modules/babel-runtime/helpers/extends.js","webpack:///node_modules/babel-runtime/core-js/object/assign.js","webpack:///node_modules/core-js/library/fn/object/assign.js","webpack:///node_modules/core-js/library/modules/es6.object.assign.js","webpack:///node_modules/core-js/library/modules/_object-assign.js","webpack:///node_modules/core-js/library/modules/_object-gops.js","webpack:///node_modules/core-js/library/modules/_object-pie.js","webpack:///node_modules/babel-runtime/helpers/objectWithoutProperties.js","webpack:///lib/environment/_common.js","webpack:///node_modules/babel-runtime/helpers/slicedToArray.js","webpack:///node_modules/babel-runtime/core-js/is-iterable.js","webpack:///node_modules/core-js/library/fn/is-iterable.js","webpack:///node_modules/core-js/library/modules/core.is-iterable.js","webpack:///node_modules/babel-runtime/core-js/get-iterator.js","webpack:///node_modules/core-js/library/fn/get-iterator.js","webpack:///node_modules/core-js/library/modules/core.get-iterator.js","webpack:///node_modules/babel-runtime/core-js/map.js","webpack:///node_modules/core-js/library/fn/map.js","webpack:///node_modules/core-js/library/modules/es6.map.js","webpack:///node_modules/core-js/library/modules/_collection-strong.js","webpack:///node_modules/core-js/library/modules/_meta.js","webpack:///node_modules/core-js/library/modules/_collection.js","webpack:///node_modules/core-js/library/modules/_array-methods.js","webpack:///node_modules/core-js/library/modules/_array-species-create.js","webpack:///node_modules/core-js/library/modules/_array-species-constructor.js","webpack:///node_modules/core-js/library/modules/_is-array.js","webpack:///node_modules/core-js/library/modules/es7.map.to-json.js","webpack:///node_modules/core-js/library/modules/_collection-to-json.js","webpack:///node_modules/core-js/library/modules/_array-from-iterable.js","webpack:///lib/utils/Cache.js","webpack:///node_modules/babel-runtime/core-js/array/from.js","webpack:///node_modules/core-js/library/fn/array/from.js","webpack:///node_modules/core-js/library/modules/es6.array.from.js","webpack:///node_modules/core-js/library/modules/_create-property.js","webpack:///lib/environment/_messaging.js","webpack:///./images/css-off.png","webpack:///./images/css-off-small.png","webpack:///./images/css-on.png","webpack:///./images/css-on-small.png","webpack:///chrome/_helpers.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b9b256dd9cedc7140a8d\n **/","/*\r\n\r\n\tRES is released under the GPL. However, I do ask a favor (obviously I don't/can't require it, I ask out of courtesy):\r\n\r\n\tBecause RES auto updates and is hosted from a central server, I humbly request that if you intend to distribute your own\r\n\tmodified Reddit Enhancement Suite, you name it something else and make it very clear to your users that it's your own\r\n\tbranch and isn't related to mine.\r\n\r\n\tRES is updated very frequently, and I get lots of tech support questions/requests from people on outdated versions. If\r\n\tyou're distributing RES via your own means, those recipients won't always be on the latest and greatest, which makes\r\n\tit harder for me to debug things and understand (at least with browsers that auto-update) whether or not people are on\r\n\ta current version of RES.\r\n\r\n\tI can't legally hold you to any of this - I'm just asking out of courtesy.\r\n\r\n\tThanks, I appreciate your consideration.  Without further ado, the all-important GPL Statement:\r\n\r\n\tThis program is free software: you can redistribute it and/or modify\r\n\tit under the terms of the GNU General Public License as published by\r\n\tthe Free Software Foundation, either version 3 of the License, or\r\n\t(at your option) any later version.\r\n\r\n\tThis program is distributed in the hope that it will be useful,\r\n\tbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\n\tMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n\tGNU General Public License for more details.\r\n\r\n\tYou should have received a copy of the GNU General Public License\r\n\talong with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n*/\r\n\r\n/* eslint-env webextensions */\r\n\r\nimport { addCommonBackgroundListeners } from '../lib/environment/_common';\r\nimport { createMessageHandler } from '../lib/environment/_messaging';\r\n\r\nimport cssOff from '../images/css-off.png';\r\nimport cssOffSmall from '../images/css-off-small.png';\r\nimport cssOn from '../images/css-on.png';\r\nimport cssOnSmall from '../images/css-on-small.png';\r\n\r\nimport { apiToPromise } from './_helpers';\r\n\r\nconst _sendMessage = apiToPromise(chrome.tabs.sendMessage);\r\n\r\nconst {\r\n\t_handleMessage,\r\n\tsendMessage,\r\n\taddListener,\r\n} = createMessageHandler((type, { transaction, isResponse, ...obj }, { sendResponse, tabId }) => {\r\n\tif (isResponse) {\r\n\t\tsendResponse(obj);\r\n\t} else {\r\n\t\t_sendMessage(tabId, { ...obj, type }).then(obj => {\r\n\t\t\t_handleMessage(type, { ...obj, transaction, isResponse: true });\r\n\t\t});\r\n\t}\r\n});\r\n\r\nchrome.runtime.onMessage.addListener(({ type, ...obj }, sender, sendResponse) => _handleMessage(type, obj, { ...sender.tab, sendResponse }));\r\n\r\n// Listeners\r\n\r\naddCommonBackgroundListeners(addListener);\r\n\r\naddListener('ajax', async ({ method, url, headers, data, credentials }) => {\r\n\tconst request = new XMLHttpRequest();\r\n\r\n\tconst load = Promise.race([\r\n\t\tnew Promise(resolve => (request.onload = resolve)),\r\n\t\tnew Promise(resolve => (request.onerror = resolve))\r\n\t\t\t.then(() => { throw new Error(`XHR error - url: ${url}`); }),\r\n\t]);\r\n\r\n\trequest.open(method, url, true);\r\n\r\n\tfor (const name in headers) {\r\n\t\trequest.setRequestHeader(name, headers[name]);\r\n\t}\r\n\r\n\tif (credentials) {\r\n\t\trequest.withCredentials = true;\r\n\t}\r\n\r\n\trequest.send(data);\r\n\r\n\tawait load;\r\n\r\n\t// Only store `status`, `responseText` and `responseURL` fields\r\n\treturn {\r\n\t\tstatus: request.status,\r\n\t\tresponseText: request.responseText,\r\n\t\tresponseURL: request.responseURL,\r\n\t};\r\n});\r\n\r\naddListener('permissions', ({ operation, permissions, origins }) => {\r\n\tswitch (operation) {\r\n\t\tcase 'contains':\r\n\t\t\treturn apiToPromise(chrome.permissions.contains)({ permissions, origins });\r\n\t\tcase 'request':\r\n\t\t\treturn apiToPromise(chrome.permissions.request)({ permissions, origins });\r\n\t\tcase 'remove':\r\n\t\t\treturn apiToPromise(chrome.permissions.remove)({ permissions, origins });\r\n\t\tdefault:\r\n\t\t\tthrow new Error(`Invalid permissions operation: ${operation}`);\r\n\t}\r\n});\r\n\r\n(async () => {\r\n\tconst _set = apiToPromise(::chrome.storage.local.set);\r\n\tconst set = (key, value) => _set({ [key]: value });\r\n\r\n\tconst MIGRATED_TO_CHROME_STORAGE = 'MIGRATED_TO_CHROME_STORAGE';\r\n\r\n\tif (localStorage.getItem(MIGRATED_TO_CHROME_STORAGE) !== MIGRATED_TO_CHROME_STORAGE) {\r\n\t\tawait Promise.all(Object.keys(localStorage).map(async key => {\r\n\t\t\ttry {\r\n\t\t\t\tawait set(key, JSON.parse(localStorage.getItem(key)));\r\n\t\t\t\tconsole.log(key);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tawait set(key, localStorage.getItem(key));\r\n\t\t\t\tconsole.warn(key);\r\n\t\t\t}\r\n\t\t}));\r\n\t\tlocalStorage.setItem(MIGRATED_TO_CHROME_STORAGE, MIGRATED_TO_CHROME_STORAGE);\r\n\t}\r\n})();\r\n\r\naddListener('deleteCookies', cookies =>\r\n\tcookies.forEach(({ url, name }) => chrome.cookies.remove({ url, name }))\r\n);\r\n\r\naddListener('openNewTabs', ({ urls, focusIndex }, { id: tabId, index: currentIndex }) => {\r\n\turls.forEach((url, i) => chrome.tabs.create({\r\n\t\turl,\r\n\t\tselected: i === focusIndex,\r\n\t\tindex: ++currentIndex,\r\n\t\topenerTabId: tabId,\r\n\t}));\r\n});\r\n\r\naddListener('addURLToHistory', url => {\r\n\tchrome.history.addUrl({ url });\r\n});\r\n\r\naddListener('isURLVisited', async url =>\r\n\t(await apiToPromise(chrome.history.getVisits)({ url })).length > 0\r\n);\r\n\r\nchrome.pageAction.onClicked.addListener(({ id: tabId }) =>\r\n\tsendMessage('pageActionClick', undefined, { tabId })\r\n);\r\n\r\naddListener('pageAction', ({ operation, state }, { id: tabId }) => {\r\n\tswitch (operation) {\r\n\t\tcase 'show':\r\n\t\t\tchrome.pageAction.show(tabId);\r\n\t\t\tchrome.pageAction.setIcon({\r\n\t\t\t\ttabId,\r\n\t\t\t\tpath: {\r\n\t\t\t\t\t19: state ? cssOnSmall : cssOffSmall,\r\n\t\t\t\t\t38: state ? cssOn : cssOff,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tbreak;\r\n\t\tcase 'hide':\r\n\t\tcase 'destroy':\r\n\t\t\tchrome.pageAction.hide(tabId);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tthrow new Error(`Invalid pageAction operation: ${operation}`);\r\n\t}\r\n});\r\n\r\naddListener('multicast', async (request, { id: tabId, incognito }) =>\r\n\tPromise.all(\r\n\t\t(await apiToPromise(chrome.tabs.query)({ url: '*://*.reddit.com/*', status: 'complete' }))\r\n\t\t\t.filter(tab => tab.id !== tabId && tab.incognito === incognito)\r\n\t\t\t.map(({ id: tabId }) => sendMessage('multicast', request, { tabId }))\r\n\t)\r\n);\r\n\n\n\n/** WEBPACK FOOTER **\n ** chrome/background.entry.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n\n\n/** WEBPACK FOOTER **\n ** node_modules/babel-runtime/core-js/object/keys.js\n **/","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/fn/object/keys.js\n **/","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object')\n  , $keys    = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function(){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/es6.object.keys.js\n **/","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_to-object.js\n **/","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_defined.js\n **/","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_object-keys.js\n **/","var has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_object-keys-internal.js\n **/","undefined\n\n\n/** WEBPACK FOOTER **\n ** \n **/","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_has.js\n **/","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_to-iobject.js\n **/","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_iobject.js\n **/","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_cof.js\n **/","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_array-includes.js\n **/","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_to-length.js\n **/","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_to-integer.js\n **/","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_to-index.js\n **/","var shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_shared-key.js\n **/","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_shared.js\n **/","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_global.js\n **/","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_uid.js\n **/","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_enum-bug-keys.js\n **/","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export')\n  , core    = require('./_core')\n  , fails   = require('./_fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_object-sap.js\n **/","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_export.js\n **/","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_core.js\n **/","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_ctx.js\n **/","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_a-function.js\n **/","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_hide.js\n **/","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_object-dp.js\n **/","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_an-object.js\n **/","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_is-object.js\n **/","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_ie8-dom-define.js\n **/","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_descriptors.js\n **/","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_fails.js\n **/","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_dom-create.js\n **/","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_to-primitive.js\n **/","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_property-desc.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n\n\n/** WEBPACK FOOTER **\n ** node_modules/babel-runtime/core-js/promise.js\n **/","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/_core').Promise;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/fn/promise.js\n **/","'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/es6.string.iterator.js\n **/","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_string-at.js\n **/","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_iter-define.js\n **/","module.exports = true;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_library.js\n **/","module.exports = require('./_hide');\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_redefine.js\n **/","module.exports = {};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_iterators.js\n **/","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_iter-create.js\n **/","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject    = require('./_an-object')\n  , dPs         = require('./_object-dps')\n  , enumBugKeys = require('./_enum-bug-keys')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , Empty       = function(){ /* empty */ }\n  , PROTOTYPE   = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function(){\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe')\n    , i      = enumBugKeys.length\n    , lt     = '<'\n    , gt     = '>'\n    , iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties){\n  var result;\n  if(O !== null){\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty;\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_object-create.js\n **/","var dP       = require('./_object-dp')\n  , anObject = require('./_an-object')\n  , getKeys  = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\n  anObject(O);\n  var keys   = getKeys(Properties)\n    , length = keys.length\n    , i = 0\n    , P;\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_object-dps.js\n **/","module.exports = require('./_global').document && document.documentElement;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_html.js\n **/","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_set-to-string-tag.js\n **/","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_wks.js\n **/","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has         = require('./_has')\n  , toObject    = require('./_to-object')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function(O){\n  O = toObject(O);\n  if(has(O, IE_PROTO))return O[IE_PROTO];\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_object-gpo.js\n **/","require('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/web.dom.iterable.js\n **/","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/es6.array.iterator.js\n **/","module.exports = function(){ /* empty */ };\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_add-to-unscopables.js\n **/","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_iter-step.js\n **/","'use strict';\nvar LIBRARY            = require('./_library')\n  , global             = require('./_global')\n  , ctx                = require('./_ctx')\n  , classof            = require('./_classof')\n  , $export            = require('./_export')\n  , isObject           = require('./_is-object')\n  , aFunction          = require('./_a-function')\n  , anInstance         = require('./_an-instance')\n  , forOf              = require('./_for-of')\n  , speciesConstructor = require('./_species-constructor')\n  , task               = require('./_task').set\n  , microtask          = require('./_microtask')()\n  , PROMISE            = 'Promise'\n  , TypeError          = global.TypeError\n  , process            = global.process\n  , $Promise           = global[PROMISE]\n  , process            = global.process\n  , isNode             = classof(process) == 'process'\n  , empty              = function(){ /* empty */ }\n  , Internal, GenericPromiseCapability, Wrapper;\n\nvar USE_NATIVE = !!function(){\n  try {\n    // correct subclassing with @@species support\n    var promise     = $Promise.resolve(1)\n      , FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function(exec){ exec(empty, empty); };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch(e){ /* empty */ }\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // with library wrapper special case\n  return a === b || a === $Promise && b === Wrapper;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar newPromiseCapability = function(C){\n  return sameConstructor($Promise, C)\n    ? new PromiseCapability(C)\n    : new GenericPromiseCapability(C);\n};\nvar PromiseCapability = GenericPromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject  = aFunction(reject);\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(promise, isReject){\n  if(promise._n)return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function(){\n    var value = promise._v\n      , ok    = promise._s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , domain  = reaction.domain\n        , result, then;\n      try {\n        if(handler){\n          if(!ok){\n            if(promise._h == 2)onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if(handler === true)result = value;\n          else {\n            if(domain)domain.enter();\n            result = handler(value);\n            if(domain)domain.exit();\n          }\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if(isReject && !promise._h)onUnhandled(promise);\n  });\n};\nvar onUnhandled = function(promise){\n  task.call(global, function(){\n    var value = promise._v\n      , abrupt, handler, console;\n    if(isUnhandled(promise)){\n      abrupt = perform(function(){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if(abrupt)throw abrupt.error;\n  });\n};\nvar isUnhandled = function(promise){\n  if(promise._h == 1)return false;\n  var chain = promise._a || promise._c\n    , i     = 0\n    , reaction;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar onHandleUnhandled = function(promise){\n  task.call(global, function(){\n    var handler;\n    if(isNode){\n      process.emit('rejectionHandled', promise);\n    } else if(handler = global.onrejectionhandled){\n      handler({promise: promise, reason: promise._v});\n    }\n  });\n};\nvar $reject = function(value){\n  var promise = this;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if(!promise._a)promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function(value){\n  var promise = this\n    , then;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      microtask(function(){\n        var wrapper = {_w: promise, _d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch(e){\n    $reject.call({_w: promise, _d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor){\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch(err){\n      $reject.call(this, err);\n    }\n  };\n  Internal = function Promise(executor){\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail   = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if(this._a)this._a.push(reaction);\n      if(this._s)notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n  PromiseCapability = function(){\n    var promise  = new Internal;\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject  = ctx($reject, promise, 1);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = newPromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n    var capability = newPromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function(iter){\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      var values    = []\n        , index     = 0\n        , remaining = 1;\n      forOf(iterable, false, function(promise){\n        var $index        = index++\n          , alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled  = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/es6.promise.js\n **/","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_classof.js\n **/","module.exports = function(it, Constructor, name, forbiddenField){\n  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_an-instance.js\n **/","var ctx         = require('./_ctx')\n  , call        = require('./_iter-call')\n  , isArrayIter = require('./_is-array-iter')\n  , anObject    = require('./_an-object')\n  , toLength    = require('./_to-length')\n  , getIterFn   = require('./core.get-iterator-method')\n  , BREAK       = {}\n  , RETURN      = {};\nvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator, result;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if(result === BREAK || result === RETURN)return result;\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    result = call(iterator, f, step.value, entries);\n    if(result === BREAK || result === RETURN)return result;\n  }\n};\nexports.BREAK  = BREAK;\nexports.RETURN = RETURN;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_for-of.js\n **/","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_iter-call.js\n **/","// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_is-array-iter.js\n **/","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/core.get-iterator-method.js\n **/","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./_an-object')\n  , aFunction = require('./_a-function')\n  , SPECIES   = require('./_wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_species-constructor.js\n **/","var ctx                = require('./_ctx')\n  , invoke             = require('./_invoke')\n  , html               = require('./_html')\n  , cel                = require('./_dom-create')\n  , global             = require('./_global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./_cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_task.js\n **/","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_invoke.js\n **/","var global    = require('./_global')\n  , macrotask = require('./_task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./_cof')(process) == 'process';\n\nmodule.exports = function(){\n  var head, last, notify;\n\n  var flush = function(){\n    var parent, fn;\n    if(isNode && (parent = process.domain))parent.exit();\n    while(head){\n      fn   = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch(e){\n        if(head)notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if(parent)parent.enter();\n  };\n\n  // Node.js\n  if(isNode){\n    notify = function(){\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver\n  } else if(Observer){\n    var toggle = true\n      , node   = document.createTextNode('');\n    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n    notify = function(){\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if(Promise && Promise.resolve){\n    var promise = Promise.resolve();\n    notify = function(){\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function(){\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function(fn){\n    var task = {fn: fn, next: undefined};\n    if(last)last.next = task;\n    if(!head){\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_microtask.js\n **/","var hide = require('./_hide');\nmodule.exports = function(target, src, safe){\n  for(var key in src){\n    if(safe && target[key])target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_redefine-all.js\n **/","'use strict';\nvar global      = require('./_global')\n  , core        = require('./_core')\n  , dP          = require('./_object-dp')\n  , DESCRIPTORS = require('./_descriptors')\n  , SPECIES     = require('./_wks')('species');\n\nmodule.exports = function(KEY){\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_set-species.js\n **/","var ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_iter-detect.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _promise = require(\"../core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new _promise2.default(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return _promise2.default.resolve(value).then(function (value) {\n            return step(\"next\", value);\n          }, function (err) {\n            return step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/babel-runtime/helpers/asyncToGenerator.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/babel-runtime/helpers/extends.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n/** WEBPACK FOOTER **\n ** node_modules/babel-runtime/core-js/object/assign.js\n **/","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/fn/object/assign.js\n **/","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/es6.object.assign.js\n **/","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = require('./_object-keys')\n  , gOPS     = require('./_object-gops')\n  , pIE      = require('./_object-pie')\n  , toObject = require('./_to-object')\n  , IObject  = require('./_iobject')\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_object-assign.js\n **/","exports.f = Object.getOwnPropertySymbols;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_object-gops.js\n **/","exports.f = {}.propertyIsEnumerable;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_object-pie.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/babel-runtime/helpers/objectWithoutProperties.js\n **/","import Cache from '../utils/Cache';\r\n\r\nexport function addCommonBackgroundListeners(addListener) {\r\n\tconst session = new Map();\r\n\r\n\taddListener('session', ([operation, key, value]) => {\r\n\t\tswitch (operation) {\r\n\t\t\tcase 'get':\r\n\t\t\t\treturn session.get(key);\r\n\t\t\tcase 'set':\r\n\t\t\t\tsession.set(key, value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'delete':\r\n\t\t\t\treturn session.delete(key);\r\n\t\t\tcase 'has':\r\n\t\t\t\treturn session.has(key);\r\n\t\t\tcase 'clear':\r\n\t\t\t\treturn session.clear();\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Invalid session operation: ${operation}`);\r\n\t\t}\r\n\t});\r\n\r\n\tconst cache = new Cache();\r\n\r\n\taddListener('XHRCache', ([operation, key, value]) => {\r\n\t\tswitch (operation) {\r\n\t\t\tcase 'set':\r\n\t\t\t\treturn cache.set(key, value);\r\n\t\t\tcase 'check':\r\n\t\t\t\treturn cache.get(key, value);\r\n\t\t\tcase 'delete':\r\n\t\t\t\treturn cache.delete(key);\r\n\t\t\tcase 'clear':\r\n\t\t\t\treturn cache.clear();\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Invalid XHRCache operation: ${operation}`);\r\n\t\t}\r\n\t});\r\n\r\n\tconst waiting = new Map();\r\n\r\n\taddListener('authFlow', ({ operation, id, token }) => {\r\n\t\tswitch (operation) {\r\n\t\t\tcase 'start':\r\n\t\t\t\tif (waiting.has(id)) {\r\n\t\t\t\t\tthrow new Error(`Auth handler for id: ${id} already exists.`);\r\n\t\t\t\t}\r\n\t\t\t\treturn new Promise((resolve, reject) => waiting.set(id, { resolve, reject }));\r\n\t\t\tcase 'complete':\r\n\t\t\t\tif (!waiting.has(id)) {\r\n\t\t\t\t\tconsole.error(`No auth handler for id: ${id} (sent token: ${token}).`);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\twaiting.get(id).resolve(token);\r\n\t\t\t\twaiting.delete(id);\r\n\t\t\t\treturn true;\r\n\t\t\tcase 'cancel':\r\n\t\t\t\tif (!waiting.has(id)) {\r\n\t\t\t\t\tconsole.error(`No auth handler for id: ${id} (attempted cancellation).`);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\twaiting.get(id).reject(new Error('Auth flow cancelled.'));\r\n\t\t\t\twaiting.delete(id);\r\n\t\t\t\treturn true;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Invalid authFlow operation: ${operation}`);\r\n\t\t}\r\n\t});\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** lib/environment/_common.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n/** WEBPACK FOOTER **\n ** node_modules/babel-runtime/helpers/slicedToArray.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };\n\n\n/** WEBPACK FOOTER **\n ** node_modules/babel-runtime/core-js/is-iterable.js\n **/","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/fn/is-iterable.js\n **/","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function(it){\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/core.is-iterable.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n/** WEBPACK FOOTER **\n ** node_modules/babel-runtime/core-js/get-iterator.js\n **/","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/fn/get-iterator.js\n **/","var anObject = require('./_an-object')\n  , get      = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function(it){\n  var iterFn = get(it);\n  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/core.get-iterator.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/map\"), __esModule: true };\n\n\n/** WEBPACK FOOTER **\n ** node_modules/babel-runtime/core-js/map.js\n **/","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nmodule.exports = require('../modules/_core').Map;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/fn/map.js\n **/","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')('Map', function(get){\n  return function Map(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key){\n    var entry = strong.getEntry(this, key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value){\n    return strong.def(this, key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/es6.map.js\n **/","'use strict';\nvar dP          = require('./_object-dp').f\n  , create      = require('./_object-create')\n  , redefineAll = require('./_redefine-all')\n  , ctx         = require('./_ctx')\n  , anInstance  = require('./_an-instance')\n  , defined     = require('./_defined')\n  , forOf       = require('./_for-of')\n  , $iterDefine = require('./_iter-define')\n  , step        = require('./_iter-step')\n  , setSpecies  = require('./_set-species')\n  , DESCRIPTORS = require('./_descriptors')\n  , fastKey     = require('./_meta').fastKey\n  , SIZE        = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      anInstance(that, C, NAME, '_i');\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        anInstance(this, C, 'forEach');\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)dP(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_collection-strong.js\n **/","var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_meta.js\n **/","'use strict';\nvar global         = require('./_global')\n  , $export        = require('./_export')\n  , meta           = require('./_meta')\n  , fails          = require('./_fails')\n  , hide           = require('./_hide')\n  , redefineAll    = require('./_redefine-all')\n  , forOf          = require('./_for-of')\n  , anInstance     = require('./_an-instance')\n  , isObject       = require('./_is-object')\n  , setToStringTag = require('./_set-to-string-tag')\n  , dP             = require('./_object-dp').f\n  , each           = require('./_array-methods')(0)\n  , DESCRIPTORS    = require('./_descriptors');\n\nmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n  var Base  = global[NAME]\n    , C     = Base\n    , ADDER = IS_MAP ? 'set' : 'add'\n    , proto = C && C.prototype\n    , O     = {};\n  if(!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n    new C().entries().next();\n  }))){\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function(target, iterable){\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base;\n      if(iterable != undefined)forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','),function(KEY){\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if(KEY in proto && !(IS_WEAK && KEY == 'clear'))hide(C.prototype, KEY, function(a, b){\n        anInstance(this, C, KEY);\n        if(!IS_ADDER && IS_WEAK && !isObject(a))return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    if('size' in proto)dP(C.prototype, 'size', {\n      get: function(){\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_collection.js\n **/","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./_ctx')\n  , IObject  = require('./_iobject')\n  , toObject = require('./_to-object')\n  , toLength = require('./_to-length')\n  , asc      = require('./_array-species-create');\nmodule.exports = function(TYPE, $create){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX\n    , create        = $create || asc;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_array-methods.js\n **/","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function(original, length){\n  return new (speciesConstructor(original))(length);\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_array-species-create.js\n **/","var isObject = require('./_is-object')\n  , isArray  = require('./_is-array')\n  , SPECIES  = require('./_wks')('species');\n\nmodule.exports = function(original){\n  var C;\n  if(isArray(original)){\n    C = original.constructor;\n    // cross-realm fallback\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\n    if(isObject(C)){\n      C = C[SPECIES];\n      if(C === null)C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_array-species-constructor.js\n **/","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_is-array.js\n **/","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = require('./_export');\n\n$export($export.P + $export.R, 'Map', {toJSON: require('./_collection-to-json')('Map')});\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/es7.map.to-json.js\n **/","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof')\n  , from    = require('./_array-from-iterable');\nmodule.exports = function(NAME){\n  return function toJSON(){\n    if(classof(this) != NAME)throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_collection-to-json.js\n **/","var forOf = require('./_for-of');\n\nmodule.exports = function(iter, ITERATOR){\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_array-from-iterable.js\n **/","export default class Cache extends Map {\r\n\tconstructor(capacity = 500) {\r\n\t\tsuper();\r\n\t\tthis.capacity = capacity;\r\n\t}\r\n\r\n\tget(key, maxAge = Infinity) {\r\n\t\tconst entry = super.get(key);\r\n\t\tconst now = Date.now();\r\n\t\tif (entry && (now - entry.timestamp < maxAge)) {\r\n\t\t\tentry.timestamp = now;\r\n\t\t\treturn entry.value;\r\n\t\t}\r\n\t}\r\n\r\n\tset(key, value) {\r\n\t\tsuper.set(key, { value, timestamp: Date.now() });\r\n\r\n\t\tif (this.size > this.capacity) {\r\n\t\t\t// evict least-recently used\r\n\t\t\tArray.from(this.entries())\r\n\t\t\t\t.sort(([, a], [, b]) => b.timestamp - a.timestamp)\r\n\t\t\t\t.slice((this.capacity / 2) | 0)\r\n\t\t\t\t.forEach(([key]) => this.delete(key));\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** lib/utils/Cache.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n/** WEBPACK FOOTER **\n ** node_modules/babel-runtime/core-js/array/from.js\n **/","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/fn/array/from.js\n **/","'use strict';\nvar ctx            = require('./_ctx')\n  , $export        = require('./_export')\n  , toObject       = require('./_to-object')\n  , call           = require('./_iter-call')\n  , isArrayIter    = require('./_is-array-iter')\n  , toLength       = require('./_to-length')\n  , createProperty = require('./_create-property')\n  , getIterFn      = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/es6.array.from.js\n **/","'use strict';\nvar $defineProperty = require('./_object-dp')\n  , createDesc      = require('./_property-desc');\n\nmodule.exports = function(object, index, value){\n  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n/** WEBPACK FOOTER **\n ** node_modules/core-js/library/modules/_create-property.js\n **/","export function createMessageHandler(_sendMessage) {\r\n\tconst listeners = new Map();\r\n\tconst interceptors = new Map();\r\n\tconst waiting = new Map();\r\n\tlet transaction = 0;\r\n\r\n\tfunction addListener(type, callback) {\r\n\t\tif (listeners.has(type)) {\r\n\t\t\tthrow new Error(`Listener for \"${type}\" already exists.`);\r\n\t\t}\r\n\t\tlisteners.set(type, callback);\r\n\t}\r\n\r\n\tfunction addInterceptor(type, callback) {\r\n\t\tif (interceptors.has(type)) {\r\n\t\t\tthrow new Error(`Interceptor for \"${type}\" already exists.`);\r\n\t\t}\r\n\t\tinterceptors.set(type, callback);\r\n\t}\r\n\r\n\tfunction sendMessage(type, data, context) {\r\n\t\tif (interceptors.has(type)) {\r\n\t\t\treturn (async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn await interceptors.get(type)(data, context);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthrow new Error(`Error in \"${type}\" interceptor: ${e.message || e}`);\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t}\r\n\r\n\t\t++transaction;\r\n\r\n\t\t_sendMessage(type, { data, transaction }, context);\r\n\r\n\t\treturn new Promise((resolve, reject) => waiting.set(transaction, { resolve, reject }));\r\n\t}\r\n\r\n\tfunction _handleMessage(type, { data, transaction, error, isResponse }, context) {\r\n\t\tif (isResponse) {\r\n\t\t\tif (!waiting.has(transaction)) {\r\n\t\t\t\tthrow new Error(`No \"${type}\" response handler (transaction ${transaction}) - this should never happen.`);\r\n\t\t\t}\r\n\r\n\t\t\tconst handler = waiting.get(transaction);\r\n\t\t\twaiting.delete(transaction);\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\thandler.reject(new Error(`Error in target's \"${type}\" handler: ${error}`));\r\n\t\t\t} else {\r\n\t\t\t\thandler.resolve(data);\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (!listeners.has(type)) {\r\n\t\t\tthrow new Error(`Unrecognised message type: ${type}`);\r\n\t\t}\r\n\r\n\t\tfunction sendResponse({ data, error }) {\r\n\t\t\t_sendMessage(type, { data, transaction, error, isResponse: true }, context);\r\n\t\t}\r\n\r\n\t\tlet response;\r\n\r\n\t\ttry {\r\n\t\t\tresponse = listeners.get(type)(data, context);\r\n\t\t} catch (e) {\r\n\t\t\tsendResponse({ error: e.message || e });\r\n\t\t\tthrow e;\r\n\t\t}\r\n\r\n\t\tif (response instanceof Promise) {\r\n\t\t\tresponse\r\n\t\t\t\t.then(data => sendResponse({ data }))\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\tsendResponse({ error: e.message || e });\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t});\r\n\t\t\t// true = response will be handled asynchronously (needed for Chrome)\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tsendResponse({ data: response });\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn {\r\n\t\t_handleMessage,\r\n\t\tsendMessage,\r\n\t\taddListener,\r\n\t\taddInterceptor,\r\n\t};\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** lib/environment/_messaging.js\n **/","module.exports = __webpack_public_path__ + \"css-off.png\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./images/css-off.png\n ** module id = 106\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"css-off-small.png\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./images/css-off-small.png\n ** module id = 107\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"css-on.png\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./images/css-on.png\n ** module id = 108\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"css-on-small.png\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./images/css-on-small.png\n ** module id = 109\n ** module chunks = 0\n **/","/* eslint-env webextensions */\r\n\r\nexport function apiToPromise(func) {\r\n\treturn (...args) =>\r\n\t\tnew Promise((resolve, reject) =>\r\n\t\t\tfunc(...args, (...results) => {\r\n\t\t\t\tif (chrome.runtime.lastError) {\r\n\t\t\t\t\treject(new Error(chrome.runtime.lastError.message));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolve(results.length > 1 ? results : results[0]);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** chrome/_helpers.js\n **/"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AAAA;AACA;AACA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AACA;AACA;;;;;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAbA;AACA;AAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AADA;AAGA;AACA;AADA;AAIA;AARA;AACA;AAJA;AACA;AACA;AACA;AAUA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AADA;AAEA;AAAA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AAGA;AACA;AADA;AACA;AAGA;AACA;AADA;AACA;AACA;AACA;AAEA;;AACA;AACA;AACA;AAHA;AAxBA;AACA;AADA;AAAA;AAAA;;;AA+BA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;;AATA;AACA;AAYA;AACA;AACA;AADA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAEA;AARA;AACA;AADA;AAAA;AAAA;AAAA;AASA;AAEA;AAlBA;AACA;AAmBA;AACA;AAAA;AAAA;AADA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAHA;AAAA;AADA;AACA;AAQA;AACA;AADA;AACA;AAGA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;;;AAIA;AAAA;AACA;AADA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;;AAGA;AACA;AAFA;AAFA;AAQA;AAAA;AACA;AACA;AAEA;AACA;AAAA;;AAjBA;AACA;AAoBA;AAAA;AAAA;AAAA;AACA;AAEA;AADA;AAEA;AAAA;AAJA;AAAA;AACA;AADA;AAAA;AAAA;;;;;;;AChLA;;;;;;ACAA;;;;;;ACAA;AACA;;;;;;ACDA;AACA;;;;;;ACDA;AACA;;;;;;ACDA;AACA;;;;;;ACDA;ACYA;;;;;;ACZA;;;;;;ACAA;AACA;;;;;;ACDA;AACA;;;;;;ACDA;;;;;;ACAA;AACA;AACA;ALUA;AAIA;;;;;;AMhBA;AACA;ANIA;;;;;;AOLA;AACA;;;;;;ACDA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;AACA;;;;;;ACDA;;;;;;ACAA;AACA;;;;;;ACDA;AACA;;;;;;ACDA;AfoBA;AAGA;AAEA;AAAA;AeEA;AfeA;AAEA;AAGA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AgB3DA;;;;;;ACAA;AACA;;;;;;ACDA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;AACA;;;;;;ACDA;;;;;;ACAA;A1BAA;;;;;;A2BAA;AACA;A3BEA;;;;;;;A4BHA;;;;;;ACAA;;;;;;ACAA;;;;;;;;;;;;ACAA;A/BIA;AAEA;AACA;;;;;;;AgCPA;AhCGA;;;;;;;AiCHA;AjCCA;AAoCA;AAIA;AAEA;AAIA;AAKA;AAIA;;;;;;AkCxDA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;ArCOA;;;;;;AsCPA;AACA;AtCQA;AAEA;AAQA;AACA;AACA;AAgBA;;;;;;AuCrCA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;AACA;;;;;;ACDA;;;;;;ACAA;A7COA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAcA;;;;;;A8C7BA;;;;;;ACAA;;;;;;ACAA;AhDyBA;AAGA;AAKA;AAEA;AAiEA;AAoBA;AA8BA;AAWA;AAKA;AAaA;AAIA;AAEA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAWA;AAkBA;AAEA;AASA;AAEA;AAWA;AA2BA;;;;;;AiD9RA;AACA;AjDAA;AAMA;AAQA;AAEA;AAEA;;;;;;AkDnBA;;;;;;ACAA;AnDeA;;;;;;AoDfA;AACA;ApDKA;;;;;;AqDNA;AACA;;;;;;ACDA;;;;;;ACAA;AACA;;;;;;ACDA;AxDyBA;AAcA;AAKA;AAMA;AACA;AAMA;AAQA;;;;;;AyDjEA;AACA;;;;;;ACDA;A1D4BA;AAKA;AAIA;AAIA;AAMA;AACA;AACA;AACA;AACA;AACA;AAGA;;;;;;A2DvDA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;AACA;;;;;;ACDA;AAEA;AnEQA;AASA;;;;;;AoEnBA;;;;;;ACAA;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;ACEA;AACA;AAHA;AACA;;;;;AACA;AvECA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAeA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;AAyBA;;;;;;;AwEpEA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;AjFIA;AAIA;AAKA;;;;;;AkFbA;AlFiBA;AAGA;AAUA;AACA;AACA;AACA;AAIA;AACA;AAUA;AACA;AAgBA;AACA;AAOA;AAIA;AACA;AAeA;AAGA;AAGA;AACA;AACA;AACA;AACA;AANA;AAYA;AAMA;AACA;AAEA;AACA;AACA;AAKA;AAEA;AAEA;AAIA;AAMA;;;;;;AmF3IA;AnFcA;AAFA;AAOA;AmFGA;AnFEA;AAEA;AAEA;AmFKA;AnFEA;AAEA;AAEA;AAGA;;;;;;AoF1CA;ApFyBA;;;;;;AqFzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ArFyBA;AAGA;AACA;AACA;AAJA;AAMA;;;;;;AsFvCA;AACA;;;;;;ACDA;AvFSA;;;;;;AwFTA;AACA;;;;;;ACDA;AACA;;;;;;ACDA;AACA;;;;;;ACDA;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;A5FAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AADA;AACA;AADA;AAAA;AAAA;AAEA;AACA;AADA;AAAA;AAAA;AACA;AACA;AAzBA;AAAA;;;;;;A6FAA;;;;;;ACAA;;;;;;ACAA;A/FYA;AAWA;;;;;;AgGvBA;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;;;AADA;AjGCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;;;;;;AkG/FA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;;;;;;;;;;;ACEA;AACA;;;AAHA;AACA;AACA;AtGCA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;;;","sourceRoot":""}